{
  "comments": [
    {
      "key": {
        "uuid": "1a9dcd25_2af3bf0b",
        "filename": "src/call.cpp",
        "patchSetId": 6
      },
      "lineNbr": 865,
      "author": {
        "id": 11
      },
      "writtenOn": "2015-10-30T21:36:26Z",
      "side": 1,
      "message": "[Assuming you ignore the this should be in Media::Video, not Call:: part]\n\nIt would be better to create the sourcemodel here if nullptr and if the call has video. Many calls wont have video (the vast majority of SIP accounts wont, as the call corporate phone network or landline). This will avoid a bunch of useless dbus calls",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9dcd25_4af88be5",
        "filename": "src/call.cpp",
        "patchSetId": 6
      },
      "lineNbr": 1354,
      "author": {
        "id": 11
      },
      "writtenOn": "2015-10-30T21:36:26Z",
      "side": 1,
      "message": "If you add a QObject* parent to the sourcemodel constructor, this isn\u0027t necessary",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9dcd25_eadcf776",
        "filename": "src/call.h",
        "patchSetId": 6
      },
      "lineNbr": 309,
      "author": {
        "id": 11
      },
      "writtenOn": "2015-10-30T21:36:26Z",
      "side": 1,
      "message": "I think this belong to the Media::Video:: object, not the Call:: one. A call is an abstract communication object. The media handling has now been moved to the Media:: namespace.\n\nAny trace of media handling in Call:: is an artefact from the legacy design (in sflphone, the client had no control over the media beside the codecs priority, they daemon did everything, to disable video, you had to disable all codecs).",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9dcd25_caa9fb7c",
        "filename": "src/call.h",
        "patchSetId": 6
      },
      "lineNbr": 309,
      "author": {
        "id": 82
      },
      "writtenOn": "2015-11-02T22:38:59Z",
      "side": 1,
      "message": "There is a little practical issue with this solution. The Media::Video is created a few seconds after the call ( why ?), when the video is displayed. So if I put the sourcemodel instance into Media::Video it will only exists later. But the sourcemodel may be used earlier.\n\nFor instance it is requested when the user right click on the video on the gnome client. This can happen before the video is displayed.\n\nAny suggestion ?",
      "parentUuid": "1a9dcd25_eadcf776",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9dcd25_4a03ab73",
        "filename": "src/call.h",
        "patchSetId": 6
      },
      "lineNbr": 309,
      "author": {
        "id": 11
      },
      "writtenOn": "2015-11-02T23:04:29Z",
      "side": 1,
      "message": "Well, it is created a few seconds later because the daemon isn\u0027t ready to start the video yet. If I recall, it was discussed long ago and it was an issue of dropped packets at the beginning of the stream before the next keyframe. This is old (~2013) so the reasons why ::videoStarted is emitted late may have changed, but it remain the case, the delay is still there.\n\nThis in itself kind of solve the problem. There is no point in having the menu enabled early as it will probably (sometime) fail to take effect because of the race condition created by ::videoStarted vs. ::applySettings. So having the menu disabled until the daemon send videoStarted is probably the right thing to do anyway.",
      "parentUuid": "1a9dcd25_caa9fb7c",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9dcd25_0a74c3cd",
        "filename": "src/call.h",
        "patchSetId": 6
      },
      "lineNbr": 309,
      "author": {
        "id": 82
      },
      "writtenOn": "2015-11-03T21:26:32Z",
      "side": 1,
      "message": "You are right about this point.\n\nBut I think again it is only possible to put the sourceModel instance into Call :\nWhen there is only outgoing video (no incomming stream) no Media:: is not created. Because it is related to a renderer (through allPrivate::registerRenderer) but this only called for incoming video.\n\nIt would make sense to link the sourceModel to the preview somehow, but there is only one renderer for preview so...",
      "parentUuid": "1a9dcd25_4a03ab73",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a9dcd25_0ada8378",
        "filename": "src/video/sourcemodel.h",
        "patchSetId": 6
      },
      "lineNbr": 35,
      "author": {
        "id": 11
      },
      "writtenOn": "2015-10-30T21:36:26Z",
      "side": 1,
      "message": "If the singleton is dropped, the object has to have a QObject* parent \u003d nullptr argument to the explicit constructor. This is a Qt policy. See Qt memory handling doc for details.",
      "revId": "1cd2cd864e35f0c8768d47b5171500f6c1fb9769",
      "serverId": "1e26b4c1-6b8c-47ff-9df7-501b633d3b5a",
      "unresolved": false
    }
  ]
}