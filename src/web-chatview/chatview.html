<html>
<!-- Empty head might be needed for setSenderImage -->

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8">
</head>

<body>
    <div id="wrapperOfNavbar" class="navbar-wrapper">
        <div id="navbar">
            <div id="backButton" class="nav-button non-action-button nav-left" onmouseover="addBackButtonHoverProperty()"
                onclick="backToWelcomeView()">
                <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                    <path d="M0 0h24v24H0z" fill="none" />
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                </svg>
            </div>
            <div id="nav-contactid" class="nav-left">
                <div id="nav-contactid-wrapper">
                    <div id="nav-contactid-alias"></div>
                    <div id="nav-contactid-bestId"></div>
                </div>
            </div>
            <div id="optionsButton" style="display:none" class="deactivated nav-button action-button nav-right" onclick="moreOptions()">
                <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                    <path d="M0 0h24v24H0z" fill="none" />
                    <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                </svg>
            </div>
            <div id="callButtons">
                <!-- callButtons block allows more efficient hiding of placeCallButton and placeAudioCallButton -->
                <div id="placeCallButton" class="nav-button action-button nav-right" onclick="placeCall()">
                    <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none" />
                        <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" />
                    </svg>
                </div>
                <div id="placeAudioCallButton" class="nav-button action-button nav-right" onclick="placeAudioCall()">
                    <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="none" d="M0 0h24v24H0z" />
                        <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z" />
                    </svg>
                </div>
            </div>
            <div id="pluginsButton" style="display:none" class="nav-button action-button nav-right" onclick="openPluginHandlersList()">
                <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M0 0h24v24H0V0z" fill="none" />
                    <path d="M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"/>
                </svg>
            </div>
            <div id="addToConversationsButton" class="nav-button action-button nav-right" onclick="addToConversations()">
                <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M0 0h24v24H0z" fill="none" />
                    <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
            </div>
            <div id="unbanButton" class="nav-button action-critical-button nav-right" onclick="addBannedContact()">
                <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path fill="none" d="M0 0h24v24H0V0z" />
                    <circle cx="15" cy="8" r="4" />
                    <path d="M23 20v-2c0-2.3-4.1-3.7-6.9-3.9l6 5.9h.9zm-11.6-5.5C9.2 15.1 7 16.3 7 18v2h9.9l4 4 1.3-1.3-21-20.9L0 3.1l4 4V10H1v2h3v3h2v-3h2.9l2.5 2.5zM6 10v-.9l.9.9H6z" />
                </svg>
            </div>
        </div>
        <div id="invitation">
            <div id="invite_header">
                <span id="invite_image"></span>
                <div id="text" margin="16px"></div>
            </div>
            <div id="actions">
                <div id="acceptButton" class="nav-button action-button invite-btn-green" onclick="acceptInvitation()">
                    <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0h24v24H0z" fill="none" />
                        <path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                </div>
                <div id="refuseButton" class="nav-button action-button invite-btn-red" onclick="refuseInvitation()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path fill="none" d="M0 0h24v24H0V0z" />
                        <path d="M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z" />
                    </svg>
                </div>
                <div id="blockButton" class="nav-button action-button invite-btn-red" onclick="blockConversation()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none" />
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <div id="container">
        <div id="messages" onscroll="onScrolled()"></div>

        <div id="typing_indicator_container"></div>

        <div id="back_to_bottom_button_container">
            <div id="back_to_bottom_button" onclick="back_to_bottom()">Jump to latest &#9660;</div>
        </div>
        <div id="send_inteface_container" onresize="updateBackToBottomContainer()">
            <div id="sendMessage">
                <div id="sendFileButton" class="nav-button action-button" onclick="selectFileToSend()">
                    <svg class="svgicon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Icones" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Link" fill="#000000" fill-rule="nonzero" stroke="#000000" stroke-width="0.9">
                                <g id="noun_attach_998912" transform="translate(11.981262, 12.084524) rotate(25.000000) translate(-11.981262, -12.084524) translate(6.981262, 2.084524)">
                                    <path d="M4.58333333,20 C2.05607096,20 0,17.943929 0,15.4166667 L0,3.33333333 C0,1.49536133 1.49536133,0 3.33333333,0 C5.17130533,0 6.66666667,1.49536133 6.66666667,3.33333333 L6.66666667,14.1666667 C6.66666667,15.3153483 5.73201496,16.25 4.58333333,16.25 C3.43465171,16.25 2.5,15.3153483 2.5,14.1666667 L2.5,4.56075033 C2.5,4.33064779 2.68636067,4.14408367 2.91666667,4.14408367 C3.14697267,4.14408367 3.33333333,4.33064779 3.33333333,4.56075033 L3.33333333,14.1666667 C3.33333333,14.855957 3.89404296,15.4166667 4.58333333,15.4166667 C5.27262371,15.4166667 5.83333333,14.855957 5.83333333,14.1666667 L5.83333333,3.33333333 C5.83333333,1.95475258 4.71191404,0.833333333 3.33333333,0.833333333 C1.95475262,0.833333333 0.833333333,1.95475263 0.833333333,3.33333333 L0.833333333,15.4166667 C0.833333333,17.4843343 2.51546225,19.1666667 4.58333333,19.1666667 C6.65120442,19.1666667 8.33333333,17.4843343 8.33333333,15.4166667 L8.33333333,4.04276529 C8.33333333,3.81266275 8.519694,3.62609863 8.75,3.62609863 C8.980306,3.62609863 9.16666667,3.81266275 9.16666667,4.04276529 L9.16666667,15.4166667 C9.16666667,17.943929 7.11059571,20 4.58333333,20 Z" id="Path"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
                <div id="emojiButton" class=" action-button nav-button">
                    <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none" />
                        <path
                            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
                    </svg>
                </div>
                <div id="audioRecordButton" class="action-button nav-button" onclick="audioRecord()">
                    <svg class="svgicon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Icones_Fill" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Message-audio">
                                <path d="M12,2 C17.5228475,2 22,6.4771525 22,12 L22,22 L22,22 L12,22 C6.4771525,22 2,17.5228475 2,12 C2,6.4771525 6.4771525,2 12,2 Z" id="Rectangle-Copy-3" fill="#000000"></path>
                                <g id="Group" transform="translate(9.000000, 7.000000)" fill="#FFFFFF" fill-rule="nonzero">
                                    <path d="M3.2826376,0.0495376956 C2.15075637,0.0495376956 1.23099067,0.969303261 1.23099067,2.10118448 L1.23099067,5.11026918 C1.23099067,6.24214903 2.15075637,7.16191596 3.2826376,7.16191596 C4.41451882,7.16191596 5.33428439,6.24214903 5.33428439,5.11026918 L5.33428439,2.10118448 C5.33428439,0.969303261 4.41451882,0.0495376956 3.2826376,0.0495376956 L3.2826376,0.0495376956 Z" id="Shape"></path>
                                    <path d="M0.277829768,3.46892297 C0.131747046,3.46666758 -0.00228293577,3.60069619 -2.62151977e-05,3.74677891 L-2.62151977e-05,5.1145366 C-2.62151977e-05,6.83681201 1.32262269,8.24623865 3.00908469,8.38435551 L3.00908469,9.35033921 L1.91487307,9.35033921 C1.76379391,9.35033921 1.64132017,9.47280884 1.64132017,9.62389211 C1.64132017,9.77497538 1.76379391,9.89744502 1.91487307,9.89744502 L4.65040212,9.89744502 C4.80148129,9.89744502 4.92395503,9.77497538 4.92395503,9.62389211 C4.92395503,9.47280884 4.80148129,9.35064011 4.65040212,9.35033921 L3.5561905,9.35033921 L3.5561905,8.38435551 C5.24265237,8.24623865 6.56529592,6.83681201 6.56529592,5.1145366 L6.56529592,3.74677891 C6.56731043,3.60225818 6.43625533,3.46933062 6.29171955,3.46933062 C6.14718377,3.46933062 6.01612321,3.60225818 6.01816665,3.74677891 L6.01816665,5.1145366 C6.01816665,6.63475216 4.80285179,7.85006565 3.2826376,7.85006565 C1.76242204,7.85006565 0.547108409,6.63475216 0.547108409,5.1145366 L0.547108409,3.74677891 C0.549351543,3.60354661 0.421062069,3.47118667 0.277829768,3.46892297 Z" id="Path"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
                <div id="videoRecordButton" class="nav-button action-button" onclick="videoRecord()">
                    <svg class="svgicon" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g id="Icones_Fill" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="Message-video">
                                <path d="M12,2 C17.5228475,2 22,6.4771525 22,12 L22,22 L22,22 L12,22 C6.4771525,22 2,17.5228475 2,12 C2,6.4771525 6.4771525,2 12,2 Z" id="Rectangle-Copy-3" fill="#000000"></path>
                                <g id="noun_Camera_2292906" transform="translate(7.000000, 8.000000)" fill="#FFFFFF" fill-rule="nonzero">
                                    <path d="M8.92857143,0.992063492 L7.25198413,0.992063492 L6.88988095,0.27281746 C6.80555556,0.104166667 6.63690476,0 6.4484127,0 L3.47222222,0 C3.28373016,0 3.11011905,0.104166667 3.03075397,0.27281746 L2.66865079,0.992063492 L0.992063492,0.992063492 C0.446428571,0.992063492 0,1.43849206 0,1.98412698 L0,6.94444444 C0,7.49007937 0.446428571,7.93650794 0.992063492,7.93650794 L8.92857143,7.93650794 C9.47420635,7.93650794 9.92063492,7.49007937 9.92063492,6.94444444 L9.92063492,1.98412698 C9.92063492,1.43849206 9.47420635,0.992063492 8.92857143,0.992063492 Z M2.97619048,4.46428571 C2.97619048,3.36805556 3.8640873,2.48015873 4.96031746,2.48015873 C6.05654762,2.48015873 6.94444444,3.36805556 6.94444444,4.46428571 C6.94444444,5.56051587 6.05654762,6.4484127 4.96031746,6.4484127 C3.8640873,6.4484127 2.97619048,5.56051587 2.97619048,4.46428571 Z" id="Shape"></path>
                                    <path d="M5.95238095,4.46428571 C5.95238095,3.91865079 5.50595238,3.47222222 4.96031746,3.47222222 C4.41468254,3.47222222 3.96825397,3.91865079 3.96825397,4.46428571 C3.96825397,5.00992063 4.41468254,5.45634921 4.96031746,5.45634921 C5.50595238,5.45634921 5.95238095,5.00992063 5.95238095,4.46428571 Z" id="Path"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
                <textarea id="message" autofocus onkeyup="grow_text_area()" onkeydown="process_messagebar_keydown()"
                          dir="auto" rows="1"></textarea>
                <div id="sendButton" class="nav-button action-button" onclick="sendMessage();">
                    <svg class="svgicon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                        <path d="M0 0h24v24H0z" fill="none" />
                    </svg>
                </div>
            </div>
        </div>
        <div id="data_transfer_send_container"></div>
    </div>
</body>
</html>
